
## 概念

### 对象

> 游戏中任意可交互的物品都是不同的对象（全局对象除外）。

**全局对象始终表示同一个对象**

> 游戏中的全局对象的表现为：物品上有绿色的特效

### 函数

> 可接收输入（带对象进入），并进行一系列机算（在箱子里操作），并可产生输出（将箱子内的对象带出）

> 游戏中函数仅可以接受零个或一个输入，返回零个或一个输出

> 游戏中箱子是函数的物理表示。

#### 函数返回点

> 从函数的返回点，返回会到达函数调用点的下一个位置

> 游戏中的表现为，进入箱子后，箱子内部会有一个紫色的传送点，从该点传送后会返回当时进入箱子的位置。

### 生命周期

> 游戏中的非全局对象仅能存在于该对象所处的函数中，在游戏中即所在的箱子中，当离开箱子后，该对象所发生的一切变换在重新进入箱子后，都会重置。

> 当将非全局对象从箱子中返回时

> 游戏中最外层生命空间即出生点所在空间

### 递归

> 递归，就是在运行的过程中调用自己

> 游戏中的表现就是只通过进入箱子内部，能到达和之前某一层相同的环境

**应用**

> BxB 传送：假设G表示全局箱子，X表示0个或多个局部箱子。则有结论，如果在初始条件下，G可以通过任意个局部箱子到达G自身，那么可以在最里面G的上一层，将G投掷到目标位置，然后返回至最外层G，则实现传送

## TODO: 符号约定

如无特殊说明，所有本文提到的对象都是局部对象

### 对象

使用对象英文名首字母，局部对象小写，全局对象大写

    局部    全局
箱子：b     B
钥匙：k     K
石头：s     S

### 进入

\>

### 返回

<

### 抓取

&

### 放下

!

### 投掷

### 层级

**箱子L自身所在层**

$$
-L 
$$

**箱子L内所在层**

$$
L
$$

**状态**

初态s，内部有一个箱子和一把钥匙

$$
s <b, k>
$$

进入箱子b

$$
s \cdot \frac{b}{s <b, k>} 
$$

$$
B \cdot \frac{x}{B} = x
$$

B'xB'': >B- >x- &B <-x !B

$$
x \cdot B^{''} \cdot \frac{}{x}
$$

BnB: &B > b_1- < -b_1 &b_2 > b_1- > B- !b_2 > b_2- &B < -b_2 !B > B-

已转为BxB问题

## 技巧

### 负重跳

### 投掷

### 碰撞

### 传送

#### GNG 问题

在初始条件下，G无法通过任意个局部箱子到达G自身，这种情况无法直接传送，需要通过构造GXG来解决

> 利用局部箱子L1以及它的一个副本L2。构造如下状态，角色在M层，M层放置好L1和L2。第一步，将G放入任意一个箱子如L1，然后返回至M层，将L2带入L1，再带入L1中的G，放L2置G，入L2，取L2中G返回置L2所在层即G层，将G放下，入G，此时已构造出GG的递归，已转为GXG问题


-----------------------
## 技巧

### 传送
全局箱子G能传送，是因G本身内部有A，A直接或间接通向G
局部箱子可以用来传送全局物品

Nexus->Woodland->Sewer->Dungeon->Obstruction
先拿出两个终点箱子L1，L2
然后将全局箱子放进L1入口
将L1扔进水里
拿着L2进L1
拿着L2进全局，放在岸上
进L2，将全局箱子扔在泡沫上
退出L2
退出全局
总结：L1-G1-L2 LGL模式（G中无L，GNG）

传送：G1-L-...-G2 GXG模式（G中有L，L直接或间接通向G，GXG）

GG模式 G为终点，内部无通向（GNG），通过构造LGL，将内层L中的G搬回一层，形成GG，然后进入一次G，生成返回点，再将G扔到想传送的位置，回退一层即传送
案例：Nexus->Woodland->Sewer->Dungeon->Ruins->Embed

GNG问题
构造GXG

协程带物传送
将协程箱子扔到目标点，进入协程，拿上目标物，返回

## 非常规终点到达方式
叠石
灌水
传送

## 悖论
L->GG => Return G在L中的返回点被破坏

## TODO 定义操作符号，规范化描述
